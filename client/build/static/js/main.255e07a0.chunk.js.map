{"version":3,"sources":["store/consoleSlice.js","components/AppLayout/Display/Frame/index.jsx","components/AppLayout/Display/Console/index.jsx","components/AppLayout/Display/index.jsx","components/AppLayout/TextArea/highlight.js","components/AppLayout/TextArea/Linter/options.js","store/linterSlice.js","components/AppLayout/TextArea/EditorBar/CheckBox/index.jsx","components/AppLayout/InputList/index.jsx","store/workSlice.jsx","components/AppLayout/TextArea/EditorBar/index.jsx","store/cursorsSlice.js","components/AppLayout/TextArea/Linter/LintBlot.js","store/index.js","components/AppLayout/TextArea/Linter/index.js","components/AppLayout/TextArea/sharedb/index.js","components/AppLayout/TextArea/index.jsx","components/AppLayout/TextAreaGrid/index.jsx","components/AppLayout/TopBar/UserListDisplay/UserDisplay/index.jsx","components/AppLayout/TopBar/UserListDisplay/index.jsx","components/AppLayout/TopBar/index.jsx","components/AppLayout/index.jsx","components/JoinRoomPage/index.jsx","App.js","index.js","components/AppLayout/TextArea/sharedb/rich-text.js"],"names":["consoleSlice","createSlice","name","initialState","messages","reducers","addMessage","state","action","payload","type","message","find","msg","JSON","stringify","push","deleteMessages","actions","reducer","Frame","html","css","js","packages","externalCss","useState","document","setDocument","packagesScriptList","map","pckg","cssExternalList","useEffect","timer","setTimeout","scriptType","length","sendMessageScript","clearTimeout","window","addEventListener","event","data","source","className","srcDoc","mapDispatchToProps","connect","render","Message","line","messageList","console","key","uuidv4","Display","hljs","configure","languages","options","default","tooltip","linterSlice","bitwise","camelcase","curly","eqeqeq","forin","freeze","immed","latedef","newcap","noarg","noempty","nonbsp","nonew","plusplus","quotmark","undef","unused","strict","maxparams","maxdepth","maxstatements","maxcomplexity","maxlen","varstmt","asi","boss","debug","eqnull","esversion","moz","evil","expr","funcscope","globalstrict","iterator","lastsemic","laxbreak","laxcomma","loopfunc","multistr","noyield","notypeof","proto","scripturl","shadow","sub","supernew","validthis","browser","browserify","couch","devel","dojo","jasmine","jquery","mocha","mootools","node","nonstandard","phantom","prototypejs","qunit","rhino","shelljs","typed","worker","wsh","yui","changeOption","collection","option","value","htmlFor","title","id","checked","onChange","Input","defaultValue","processInput","removeInput","setValue","e","target","onKeyDown","keyCode","onClick","class","InputList","existingValues","inputInfo","inputs","setInputs","addInput","deleteInput","filter","input","workSlice","updateCss","text","updateRender","updateJs","addPackage","removePackage","addExternalCss","removeExternalCss","optionsStore","linter","editor_language","showSettings","updateShowSettings","showPackages","updateShowPackages","showCssExt","updateShowCssExt","settings","cursorsSlice","cursors","addCursor","cursor","existingCursor","curs","range","color","tinycolor","random","toHexString","updateCursor","deleteCursor","splice","findIndex","LintBlot","this","statics","blotName","domNode","setAttribute","getAttribute","Quill","import","tagName","store","configureStore","workReducer","cursorsReducer","consoleReducer","linterReducer","JSHint","JSHINT","Linter","quill","lintOptions","getState","initTimer","register","on","getText","split","errors","lint","display","processReport","report","sumOfChars","charsBeforeLineArray","calcEnd","error","start","substring","character","reduce","total","cur","curIndex","indexOf","pop","unshift","end","reason","forEach","formatText","ShareDB","types","richText","Document","url","documentId","presenceId","presenceName","socket","createSocket","connection","Connection","ReconnectingWebSocket","get","create","insert","presence","getDocPresence","localPresence","observer","Error","change","delta","submitOp","submit","destroy","fetchDocumentInstance","fetchPresence","subscribe","notify","op","subscribeToPresence","submitPresence","index","QuillCursors","TextArea","cursorState","roomInfo","updateStore","quillRef","linterState","useRef","doc","documentInfo","ref","useMemo","room","useDocument","setCursors","current","getEditor","getModule","cursorsState","clearCursors","createCursor","moveCursor","useCursorsModule","attach","dispatchData","Object","assign","removeCursor","manageCursors","updateContents","detach","useChangeNotifications","modules","classname","ops","attributes","theme","content","editor","formatLine","getLength","submitChange","renderState","onChangeSelection","syntax","highlight","highlightAuto","toolbar","clipboard","matchVisual","history","userOnly","ColorCircle","style","background","lighten","UserDisplay","backgroundColor","darken","users","userList","user","TopBar","navigate","replace","AppLayout","props","location","JoinRoomPage","setName","setRoom","onSubmit","preventDefault","App","path","ReactDOM","StrictMode","getElementById","require","transformPresence","isOwnOp","Delta","transformPosition","module","exports"],"mappings":"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","file":"static/js/main.255e07a0.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst consoleSlice = createSlice({\r\n  name: \"console\",\r\n  initialState: {\r\n    messages: []\r\n  },\r\n  reducers: {\r\n    addMessage: (state, action) => {\r\n      const { type, message } = action.payload;\r\n      if (!state.messages.find(msg => JSON.stringify(msg.message) == JSON.stringify(message))) {\r\n        state.messages.push({ type, message });\r\n      }\r\n    },\r\n    deleteMessages: state => {\r\n      state.messages = [];\r\n    }\r\n  }\r\n});\r\n\r\nconst { actions, reducer } = consoleSlice;\r\n\r\nexport const { addMessage, deleteMessages } = actions;\r\nexport default reducer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { addMessage } from \"../../../../store/consoleSlice\";\r\n\r\nconst Frame = ({ html, css, js, packages, externalCss, addMessage }) => {\r\n  const [document, setDocument] = useState(\"\");\r\n  const packagesScriptList = packages.map(pckg => `<script crossorigin src='${pckg}'></script>`)\r\n  const cssExternalList = externalCss.map(css => `<link rel=\"stylesheet\" type=\"text/css\" href=\"${css}\">`)\r\n  useEffect(() => {\r\n    let timer = null;\r\n    timer = setTimeout(() => {\r\n      const scriptType = (!!packagesScriptList.length) ? \"<script type='text/babel'>\" : '<script>';\r\n      setDocument(\r\n        packagesScriptList +\r\n        Frame.sendMessageScript +\r\n          \"<style>\" +\r\n          css +\r\n          \"</style>\" +\r\n          cssExternalList +\r\n          html +\r\n          scriptType +\r\n          js +\r\n          \"</script>\"\r\n      );\r\n    }, 1000);\r\n    return () => clearTimeout(timer);\r\n  }, [html, css, js]);\r\n  const onMessageReceived = event => {\r\n    if (event.data && event.data.source == \"iframe\") {\r\n      addMessage({ message: event.data.message, type: event.data.type });\r\n    }\r\n  };\r\n  window.addEventListener(\"message\", onMessageReceived, false);\r\n\r\n  return (\r\n    <div className=\"frame\">\r\n      <iframe srcDoc={document}></iframe>\r\n    </div>\r\n  );\r\n};\r\nFrame.sendMessageScript = `\r\n<script>\r\n  const _log = console.log;\r\n  console.log = function(...rest) {\r\n    window.parent.postMessage(\r\n      {\r\n        source: 'iframe',\r\n        type: 'console',\r\n        message: {message: rest[0]},\r\n      },\r\n      '*'\r\n    );\r\n    _log.apply(console, arguments);\r\n  };\r\n  window.onerror = function(message, url, line, col, errorObj) {\r\n    window.parent.postMessage(\r\n      {\r\n        source: 'iframe',\r\n        type: 'error',\r\n        message: {message, url, line, col},\r\n      },\r\n      '*'\r\n    );\r\n  };\r\n</script>`;\r\n\r\nconst mapStateToProps = state => ({\r\n  html: state.render.render,\r\n  css: state.render.css,\r\n  js: state.render.js,\r\n  packages: state.render.packages,\r\n  externalCss: state.render.externalCss\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  addMessage\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Frame);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst Console = ({ messageList }) => {\r\n  const messages = messageList.map((message) => (\r\n    <Message key={uuidv4()} {...message} />\r\n  ));\r\n  return <ul className=\"console\">{messages}</ul>;\r\n};\r\n\r\nconst Message = ({ type, message }) => {\r\n  return (\r\n    <li className={\"message \" + type}>\r\n      <div className=\"message-text\">{message.message}</div>\r\n      <div className=\"message-url\">{message.line}</div>\r\n    </li>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  messageList: state.console.messages,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Console);\r\n","import React, {useState, useEffect} from \"react\";\r\nimport Frame from \"./Frame\";\r\nimport Console from \"./Console\";\r\n\r\nconst Display = ({}) => {\r\n\r\n  return(\r\n    <div className=\"display\">\r\n      <Frame />\r\n      <Console />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Display;\r\n","import hljs from 'highlight.js/';\r\nimport 'highlight.js/styles/railscasts.css';\r\n\r\n\r\nhljs.configure({\r\n  languages: ['javascript', 'html', 'css'],\r\n});\r\n\r\nexport default hljs;\r\n","const options = [\r\n  {\r\n    name: \"bitwise\",\r\n    default: true,\r\n    tooltip: \"true: Prohibit bitwise operators (&, |, ^, etc.)\"\r\n  },\r\n  {\r\n    name: \"camelcase\",\r\n    default: false,\r\n    tooltip: \"true: Identifiers must be in camelCase\"\r\n  },\r\n  {\r\n    name: \"curly\",\r\n    default: true,\r\n    tooltip: \"true: Require {} for every new block or scope\"\r\n  },\r\n  {\r\n    name: \"eqeqeq\",\r\n    default: true,\r\n    tooltip: \"true: Require triple equals (===) for comparison\"\r\n  },\r\n  {\r\n    name: \"forin\",\r\n    default: true,\r\n    tooltip: \"true: Require filtering for..in loops with obj.hasOwnProperty()\"\r\n  },\r\n  {\r\n    name: \"freeze\",\r\n    default: true,\r\n    tooltip:\r\n      \"true: prohibits overwriting prototypes of native objects such as Array, Date etc.\"\r\n  },\r\n  {\r\n    name: \"immed\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Require immediate invocations to be wrapped in parens e.g. '(function () { } ());'\"\r\n  },\r\n  {\r\n    name: \"latedef\",\r\n    default: false,\r\n    tooltip: \"true: Require variables/functions to be defined before being used\"\r\n  },\r\n  {\r\n    name: \"newcap\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Require capitalization of all constructor functions e.g. 'new F()'\"\r\n  },\r\n  {\r\n    name: \"noarg\",\r\n    default: true,\r\n    tooltip: \"true: Prohibit use of 'arguments.caller' and 'arguments.callee'\"\r\n  },\r\n  {\r\n    name: \"noempty\",\r\n    default: true,\r\n    tooltip: \"true: Prohibit use of empty blocks\"\r\n  },\r\n  {\r\n    name: \"nonbsp\",\r\n    default: true,\r\n    tooltip: 'true: Prohibit \"non-breaking whitespace\" characters.'\r\n  },\r\n  {\r\n    name: \"nonew\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Prohibit use of constructors for side-effects (without assignment)\"\r\n  },\r\n  {\r\n    name: \"plusplus\",\r\n    default: false,\r\n    tooltip: \"true: Prohibit use of '++' and '--'\"\r\n  },\r\n  {\r\n    name: \"undef\",\r\n    default: true,\r\n    tooltip:\r\n      \"true: Require all non-global variables to be declared (prevents global leaks)\"\r\n  },\r\n  {\r\n    name: \"strict\",\r\n    default: true,\r\n    tooltip: \"true: Requires all functions run in ES5 Strict Mode\"\r\n  },\r\n  {\r\n    name: \"maxparams\",\r\n    default: false,\r\n    tooltip: \"{int} Max number of formal params allowed per function\"\r\n  },\r\n  {\r\n    name: \"maxdepth\",\r\n    default: false,\r\n    tooltip: \"{int} Max depth of nested blocks (within functions)\"\r\n  },\r\n  {\r\n    name: \"maxstatements\",\r\n    default: false,\r\n    tooltip: \"{int} Max number statements per function\"\r\n  },\r\n  {\r\n    name: \"maxcomplexity\",\r\n    default: false,\r\n    tooltip: \"{int} Max cyclomatic complexity per function\"\r\n  },\r\n  {\r\n    name: \"maxlen\",\r\n    default: false,\r\n    tooltip: \"{int} Max number of characters per line\"\r\n  },\r\n  {\r\n    name: \"varstmt\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Disallow any var statements. Only 'let' and 'const' are allowed.\"\r\n  },\r\n  {\r\n    name: \"asi\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate Automatic Semicolon Insertion (no semicolons)\"\r\n  },\r\n  {\r\n    name: \"boss\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate assignments where comparisons would be expected\"\r\n  },\r\n  {\r\n    name: \"debug\",\r\n    default: false,\r\n    tooltip: \"true: Allow debugger statements e.g. browser breakpoints.\"\r\n  },\r\n  {\r\n    name: \"eqnull\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate use of '== null'\"\r\n  },\r\n  {\r\n    name: \"moz\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Allow Mozilla specific syntax (extends and overrides esnext features)\"\r\n  },\r\n  {\r\n    name: \"evil\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate use of 'eval' and 'new Function()'\"\r\n  },\r\n  {\r\n    name: \"expr\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate 'ExpressionStatement' as Programs\"\r\n  },\r\n  {\r\n    name: \"funcscope\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate defining variables inside control statements\"\r\n  },\r\n  {\r\n    name: \"globalstrict\",\r\n    default: false,\r\n    tooltip: \"true: Allow global \\\"use strict\\\" (also enables 'strict')\"\r\n  },\r\n  {\r\n    name: \"iterator\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate using the '__iterator__' property\"\r\n  },\r\n  {\r\n    name: \"lastsemic\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Tolerate omitting a semicolon for the last statement of a 1-line block\"\r\n  },\r\n  {\r\n    name: \"laxbreak\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate possibly unsafe line breakings\"\r\n  },\r\n  {\r\n    name: \"laxcomma\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate comma-first style coding\"\r\n  },\r\n  {\r\n    name: \"loopfunc\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate functions being defined in loops\"\r\n  },\r\n  {\r\n    name: \"multistr\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate multi-line strings\"\r\n  },\r\n  {\r\n    name: \"noyield\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Tolerate generator functions with no yield statement in them.\"\r\n  },\r\n  {\r\n    name: \"notypeof\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate invalid typeof operator values\"\r\n  },\r\n  {\r\n    name: \"proto\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate using the '__proto__' property\"\r\n  },\r\n  {\r\n    name: \"scripturl\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate script-targeted URLs\"\r\n  },\r\n  {\r\n    name: \"shadow\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Allows re-define variables later in code e.g. 'var x=1; x=2;'\"\r\n  },\r\n  {\r\n    name: \"sub\",\r\n    default: false,\r\n    tooltip:\r\n      \"true: Tolerate using '[]' notation when it can still be expressed in dot notation\"\r\n  },\r\n  {\r\n    name: \"supernew\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate 'new function () { ... };' and 'new Object;'\"\r\n  },\r\n  {\r\n    name: \"validthis\",\r\n    default: false,\r\n    tooltip: \"true: Tolerate using this in a non-constructor function\"\r\n  },\r\n  {\r\n    name: \"nonstandard\",\r\n    default: false,\r\n    tooltip: \"Widely adopted globals (escape, unescape, etc)\"\r\n  },\r\n  {\r\n    name: \"typed\",\r\n    default: false,\r\n    tooltip: \"Globals for typed array constructions\"\r\n  },\r\n  { name: \"worker\", default: false, tooltip: \"Web Workers\" }\r\n];\r\n\r\nexport default options;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst linterSlice = createSlice({\r\n  name: \"linter\",\r\n  initialState: {\r\n    js: {\r\n      bitwise: true,\r\n      camelcase: false,\r\n      curly: true,\r\n      eqeqeq: true,\r\n      forin: true,\r\n      freeze: true,\r\n      immed: false,\r\n      latedef: false,\r\n      newcap: false,\r\n      noarg: true,\r\n      noempty: true,\r\n      nonbsp: true,\r\n      nonew: false,\r\n      plusplus: false,\r\n      quotmark: [false, true, \"single\", \"double\"],\r\n      undef: true,\r\n      unused: [true, \"vars\", \"strict\"],\r\n      strict: true,\r\n      maxparams: false,\r\n      maxdepth: false,\r\n      maxstatements: false,\r\n      maxcomplexity: false,\r\n      maxlen: false,\r\n      varstmt: false,\r\n      asi: false,\r\n      boss: false,\r\n      debug: false,\r\n      eqnull: false,\r\n      esversion: 5,\r\n      moz: false,\r\n      evil: false,\r\n      expr: false,\r\n      funcscope: false,\r\n      globalstrict: false,\r\n      iterator: false,\r\n      lastsemic: false,\r\n      laxbreak: false,\r\n      laxcomma: false,\r\n      loopfunc: false,\r\n      multistr: false,\r\n      noyield: false,\r\n      notypeof: false,\r\n      proto: false,\r\n      scripturl: false,\r\n      shadow: false,\r\n      sub: false,\r\n      supernew: false,\r\n      validthis: false,\r\n      browser: true,\r\n      browserify: false,\r\n      couch: false,\r\n      devel: true,\r\n      dojo: false,\r\n      jasmine: false,\r\n      jquery: false,\r\n      mocha: true,\r\n      mootools: false,\r\n      node: false,\r\n      nonstandard: false,\r\n      phantom: false,\r\n      prototypejs: false,\r\n      qunit: false,\r\n      rhino: false,\r\n      shelljs: false,\r\n      typed: false,\r\n      worker: false,\r\n      wsh: false,\r\n      yui: false\r\n    }\r\n  },\r\n  reducers: {\r\n    changeOption: (state, action) => {\r\n      const { name, collection } = action.payload;\r\n      state[collection][name] = !state[collection][name];\r\n    }\r\n  }\r\n});\r\n\r\nconst { actions, reducer } = linterSlice;\r\n\r\nexport const { changeOption } = actions;\r\nexport default reducer;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { changeOption } from \"../../../../../store/linterSlice\";\r\n\r\nconst CheckBox = ({ changeOption, option, value }) => {\r\n  function onChange() {\r\n    changeOption({ name: option.name, collection: \"js\" });\r\n  }\r\n  return (\r\n    <div>\r\n      <label\r\n        className=\"checkboxLabel\"\r\n        htmlFor={option.name}\r\n        title={option.tooltip}\r\n      >\r\n        {option.name}:\r\n      </label>\r\n      <input\r\n        type=\"checkbox\"\r\n        id={option.name}\r\n        value={option.default}\r\n        checked={value}\r\n        onChange={onChange}\r\n      />\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  changeOption: changeOption,\r\n};\r\nexport default connect(null, mapDispatchToProps)(CheckBox);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst Input = ({ id, defaultValue, processInput, removeInput }) => {\r\n  const [value, setValue] = useState(defaultValue);\r\n  function enterPressed(e) {\r\n    if (e.keyCode == 13) {\r\n      processInput(value);\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"input\">\r\n      <input\r\n        type=\"url\"\r\n        value={value}\r\n        onChange={(e) => setValue(e.target.value)}\r\n        onKeyDown={enterPressed}\r\n      />\r\n      <button onClick={() => removeInput(id, value)}>\r\n        <i class=\"fas fa-window-close closeOption\"></i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst InputList = ({\r\n  existingValues,\r\n  inputInfo,\r\n  processInput,\r\n  removeInput,\r\n}) => {\r\n  const [inputs, setInputs] = useState([\r\n    { key: uuidv4(), value: \"\" },\r\n    ...existingValues.map((value) => {\r\n      return { key: uuidv4(), value };\r\n    }),\r\n  ]);\r\n  function addInput(value) {\r\n    processInput(value);\r\n    setInputs([{ key: uuidv4() }, ...inputs]);\r\n  }\r\n  function deleteInput(key, value) {\r\n    setInputs(inputs.filter((input) => input.key != key));\r\n    if (inputs.length == 0) {\r\n      setInputs([{ key: uuidv4() }]);\r\n    }\r\n    removeInput(value);\r\n  }\r\n  return (\r\n    <div className=\"inputList\">\r\n      <p className=\"inputListInfo\">{inputInfo}</p>\r\n      {inputs.map((input) => (\r\n        <Input\r\n          key={input.key}\r\n          id={input.key}\r\n          defaultValue={input.value}\r\n          removeInput={deleteInput}\r\n          processInput={addInput}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\nexport default InputList;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst workSlice = createSlice({\r\n  name: \"work\",\r\n  initialState: {\r\n    render: \"\",\r\n    css: \"\",\r\n    js: \"\",\r\n    packages: [],\r\n    externalCss: []\r\n  },\r\n  reducers: {\r\n    updateCss: (state, action) => {\r\n      const text = action.payload;\r\n      state.css = text;\r\n    },\r\n    updateRender: (state, action) => {\r\n      const render = action.payload;\r\n      state.render = render;\r\n    },\r\n    updateJs: (state, action) => {\r\n      const text = action.payload;\r\n      state.js = text;\r\n    },\r\n    addPackage: (state, action) => {\r\n      const value = action.payload;\r\n      state.packages.push(value);\r\n    },\r\n    removePackage: (state, action) => {\r\n      const value = action.payload;\r\n      state.packages = state.packages.filter(pckg => pckg != value);\r\n    },\r\n    addExternalCss: (state, action) => {\r\n      const value = action.payload;\r\n      state.externalCss.push(value);\r\n    },\r\n    removeExternalCss: (state, action) => {\r\n      const value = action.payload;\r\n      state.externalCss = state.externalCss.filter(css => css != value);\r\n    },\r\n  }\r\n});\r\n\r\nconst { actions, reducer } = workSlice;\r\n\r\nexport const {\r\n  updateCss,\r\n  updateJs,\r\n  updateRender,\r\n  addPackage,\r\n  removePackage,\r\n  addExternalCss,\r\n  removeExternalCss\r\n} = actions;\r\nexport default reducer;\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport options from \"../Linter/options\";\r\nimport CheckBox from \"./CheckBox\";\r\nimport InputList from \"../../InputList\";\r\nimport {\r\n  addPackage,\r\n  removePackage,\r\n  addExternalCss,\r\n  removeExternalCss\r\n} from \"../../../../store/workSlice\";\r\n\r\nconst EditorBar = ({\r\n  editor_language,\r\n  optionsStore,\r\n  packages,\r\n  css,\r\n  addPackage,\r\n  removePackage,\r\n  addExternalCss,\r\n  removeExternalCss\r\n}) => {\r\n  const [showSettings, updateShowSettings] = useState(false);\r\n  const [showPackages, updateShowPackages] = useState(false);\r\n  const [showCssExt, updateShowCssExt] = useState(false);\r\n  const settings = options.map(option => (\r\n    <CheckBox option={option} value={optionsStore[option.name]} />\r\n  ));\r\n  return (\r\n    <>\r\n      <div className=\"editorBar\">\r\n        <p>{editor_language}</p>\r\n        {editor_language == \"js\" ? (\r\n          <>\r\n            <button onClick={() => updateShowSettings(!showSettings)}>\r\n              <i className=\"fas fa-sliders-h option\"></i>\r\n              Lint\r\n            </button>\r\n            <button onClick={() => updateShowPackages(!showPackages)}>\r\n              <i className=\"fas fa-cog option\"></i>\r\n              Packages\r\n            </button>\r\n          </>\r\n        ) : editor_language == \"css\" ? (\r\n          <button onClick={() => updateShowCssExt(!showCssExt)}>\r\n            <i className=\"fas fa-cog option\"></i>\r\n            CSS\r\n          </button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      {showSettings ? <div className=\"settingsPanel\">{settings}</div> : \"\"}\r\n      {showPackages ? (\r\n        <InputList\r\n          existingValues={packages}\r\n          inputInfo=\"Pass in unpkg urls to add packages to the project:\"\r\n          processInput={addPackage}\r\n          removeInput={removePackage}\r\n        />\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      {showCssExt ? (\r\n        <InputList\r\n          existingValues={css}\r\n          inputInfo=\"Pass in external css urls to add them to the project:\"\r\n          processInput={addExternalCss}\r\n          removeInput={removeExternalCss}\r\n        />\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </>\r\n  );\r\n};\r\nconst mapStateToProps = state => ({\r\n  optionsStore: state.linter.js,\r\n  packages: state.render.packages,\r\n  css: state.render.externalCss\r\n});\r\nconst mapDispatchToProps = {\r\n  addPackage: addPackage,\r\n  removePackage: removePackage,\r\n  addExternalCss: addExternalCss,\r\n  removeExternalCss: removeExternalCss\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorBar);\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport tinycolor from \"tinycolor2\";\r\n\r\nconst cursorsSlice = createSlice({\r\n  name: \"cursors\",\r\n  initialState: {\r\n    cursors: [],\r\n  },\r\n  reducers: {\r\n    addCursor: (state, action) => {\r\n      // cursor {id, collection, name, color, range}\r\n      const {collection, cursor} = action.payload;\r\n      const existingCursor = state.cursors.find(curs => curs.id == cursor.id);\r\n      if (!existingCursor) {\r\n        const color = tinycolor.random().toHexString();\r\n        state.cursors.push({id: cursor.id, collection: collection, color: color, name: cursor.name})\r\n      } else {\r\n        existingCursor.collection = collection;\r\n        existingCursor.name = cursor.name;\r\n        existingCursor.range = cursor.range;\r\n      };\r\n    },\r\n    updateCursor: (state, action) => {\r\n      const { collection, id, range } = action.payload;\r\n      const existingCursor = state.cursors.find(curs => curs.id == id)\r\n\r\n      existingCursor.range = range;\r\n      existingCursor.collection = collection;\r\n    },\r\n    deleteCursor: (state, action) => {\r\n      const {id} = action.payload;\r\n      state.cursors.splice(state.cursors.findIndex(cursor => cursor.id == id), 1);\r\n    }\r\n  }\r\n});\r\n\r\nconst { actions, reducer } = cursorsSlice;\r\n\r\nexport const { addCursor, updateCursor, deleteCursor } = actions;\r\nexport default reducer;\r\n","import { Quill } from \"react-quill\";\r\nlet Inline = Quill.import(\"blots/inline\");\r\n\r\nclass LintBlot extends Inline {\r\n  static create(value) {\r\n    const node = super.create(value);\r\n    node.setAttribute(\"data-title\", value);\r\n    return node;\r\n  }\r\n  static formats(node) {\r\n    return node.getAttribute(\"data-title\");\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name !== this.statics.blotName || !value) {\r\n      super.format(name, value);\r\n    } else {\r\n      this.domNode.setAttribute(\"data-title\", value);\r\n    }\r\n  }\r\n}\r\n\r\nLintBlot.blotName = \"lint\";\r\nLintBlot.tagName = \"span\";\r\nLintBlot.className = \"lintClass\";\r\n\r\nexport default LintBlot;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport workReducer from \"./workSlice\";\r\nimport cursorsReducer from \"./cursorsSlice\";\r\nimport consoleReducer from \"./consoleSlice\";\r\nimport linterReducer from \"./linterSlice\";\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    render: workReducer,\r\n    cursors: cursorsReducer,\r\n    console: consoleReducer,\r\n    linter: linterReducer\r\n  }\r\n});\r\n\r\nexport default store;\r\n","import { Quill } from \"react-quill\";\r\nimport LintBlot from \"./LintBlot\";\r\nimport JSHINT from \"jshint\";\r\nimport store from \"../../../../store\";\r\nconst JSHint = JSHINT.JSHINT;\r\n\r\nclass Linter {\r\n  static register() {\r\n    Quill.register(\"formats/lint\", LintBlot);\r\n  }\r\n  constructor(quill, options) {\r\n    this.quill = quill;\r\n    this.options = options;\r\n    this.lintOptions = store.getState().linter.js;\r\n    this.initTimer();\r\n  }\r\n  initTimer() {\r\n    let timer = null;\r\n    this.quill.on(\"text-change\", () => {\r\n      clearTimeout(timer);\r\n      this.lintOptions = store.getState().linter.js;\r\n      timer = setTimeout(() => {\r\n        const text = this.quill.getText().split(\"\\n\");\r\n        const errors = this.lint(text);\r\n        if (errors) {\r\n          this.display(errors);\r\n        }\r\n        timer = null;\r\n      }, 1000);\r\n    });\r\n  }\r\n  lint(text) {\r\n    JSHint(text, this.lintOptions);\r\n    if (JSHint.data().errors) {\r\n      const errors = this.processReport(JSHint.data(), text);\r\n      return errors;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  processReport(report, text) {\r\n    //calculate array where each element is number of characters in previous lines\r\n    let sumOfChars;\r\n    const charsBeforeLineArray = text\r\n      .map((line) => line.length)\r\n      .map((length) => (sumOfChars = (sumOfChars || 0) + length + 1));\r\n    charsBeforeLineArray.pop();\r\n    charsBeforeLineArray.unshift(0);\r\n    // calculate end of lint message\r\n    function calcEnd(error, quill) {\r\n      const separators = [\";\", \" \", \"\\n\"];\r\n      const start = charsBeforeLineArray[error.line - 1];\r\n      const substring = text[error.line - 1].substring(error.character - 1);\r\n      if (!substring) {\r\n        return 0;\r\n      }\r\n      const reducer = (total, cur) => {\r\n        const curIndex = substring.indexOf(cur);\r\n        return curIndex >= 0 ? (total < curIndex ? total : curIndex) : total;\r\n      };\r\n      const end =\r\n        separators.reduce(reducer, substring.length ? substring.length : 1) +\r\n        start;\r\n      return end;\r\n    }\r\n\r\n    const errors = report.errors.map((error) => ({\r\n      start: charsBeforeLineArray[error.line - 1] + error.character - 1,\r\n      end: calcEnd(error, this.quill),\r\n      reason: error.reason,\r\n    }));\r\n\r\n    return errors;\r\n  }\r\n  display(errors, charsBeforeLineArray) {\r\n    errors.forEach((error) => {\r\n      if (error.end) {\r\n        this.quill.formatText(error.start, error.end, \"lint\", error.reason);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default Linter;\r\n","import ReconnectingWebSocket from \"reconnecting-websocket\";\r\nimport ShareDB from \"sharedb/lib/client\";\r\nimport richText from \"./rich-text\";\r\n\r\nShareDB.types.register(richText.type);\r\n\r\nconst PRESENCE_CHANGE = \"presence\";\r\nconst DOCUMENT_CHANGE = \"document\";\r\n\r\n\r\nclass Document {\r\n  constructor(url, collection, documentId, presenceId, presenceName) {\r\n    this.url = url;\r\n    this.collection = collection;\r\n    this.documentId = documentId;\r\n    this.presenceName = presenceName;\r\n    this.socket = this.createSocket();\r\n    this.connection = new ShareDB.Connection(this.socket);\r\n    this.presenceId = presenceId\r\n  }\r\n  createSocket() {\r\n    return new ReconnectingWebSocket(\"wss://\" + this.url);\r\n  }\r\n  fetchDocumentInstance() {\r\n    const document = this.connection.get(this.collection, this.documentId);\r\n    if (document.type == null) {\r\n      document.create([{ insert: \"\" }], \"rich-text\");\r\n    }\r\n    return document;\r\n  }\r\n  fetchPresence() {\r\n    const presence = this.document.connection.getDocPresence(this.collection, this.documentId);\r\n    const localPresence = presence.create(this.presenceId)\r\n    return [presence, localPresence]\r\n  }\r\n  attach(observer) {\r\n    if (this.observer) {\r\n      throw new Error(\"Observer already exists!\");\r\n    } else {\r\n      this.observer = observer;\r\n    }\r\n  }\r\n  detach() {\r\n    this.observer = null;\r\n  }\r\n  notify(type, change) {\r\n    if (this.observer) {\r\n      this.observer(type, change);\r\n    }\r\n  }\r\n  submitChange(delta) {\r\n    this.document.submitOp(delta, { source: \"quill\" });\r\n  }\r\n  submitPresence(range) {\r\n    this.localPresence.submit(range, error => {\r\n      if (error) throw error;\r\n    })\r\n  }\r\n  destroyPresence() {\r\n    this.localPresence.destroy(error => {\r\n      if (error) throw error;\r\n    })\r\n  }\r\n  subscribe() {\r\n    this.document = this.fetchDocumentInstance();\r\n    [this.presence, this.localPresence] = this.fetchPresence();\r\n    this.observer = null;\r\n\r\n    const onLoad = () => {\r\n      this.notify(DOCUMENT_CHANGE, this.document.data);\r\n    };\r\n    const onSubscribe = (error) => {\r\n      if (error) throw error;\r\n    };\r\n    const onOperation = (op, source) => {\r\n      if (source === \"quill\") {\r\n        return;\r\n      } else {\r\n        this.notify(DOCUMENT_CHANGE, op);\r\n      }\r\n    };\r\n    this.document.subscribe(onSubscribe);\r\n    this.document.on(\"load\", onLoad);\r\n    this.document.on(\"op\", onOperation);\r\n    this.subscribeToPresence();\r\n\r\n  }\r\n  subscribeToPresence() {\r\n    const onSubscribe = (error) => {\r\n      if (error) throw error;\r\n      this.submitPresence({name: this.presenceName, index: 0, length: 0});\r\n    };\r\n    this.presence.subscribe(onSubscribe);\r\n    this.presence.on(\"receive\", (id, range) => {\r\n      this.notify(PRESENCE_CHANGE, {id, range})\r\n    })\r\n  };\r\n}\r\n\r\nexport default Document;\r\nexport {PRESENCE_CHANGE, DOCUMENT_CHANGE}\r\n","import React, { useEffect, useRef, useState, useMemo } from \"react\";\r\nimport ReactQuill, { Quill } from \"react-quill\";\r\nimport QuillCursors from \"quill-cursors\";\r\nimport { connect } from \"react-redux\";\r\nimport hljs from \"./highlight.js\";\r\nimport EditorBar from \"./EditorBar\";\r\nimport {\r\n  addCursor,\r\n  updateCursor,\r\n  deleteCursor,\r\n} from \"../../../store/cursorsSlice\";\r\nimport \"react-quill/dist/quill.core.css\";\r\nimport \"react-quill/dist/quill.bubble.css\";\r\nimport Linter from \"./Linter\";\r\nimport Document, { PRESENCE_CHANGE, DOCUMENT_CHANGE } from \"./sharedb\";\r\n\r\nQuill.register(\"modules/cursors\", QuillCursors);\r\nQuill.register(\"modules/linter\", Linter);\r\n\r\nconst TextArea = ({\r\n  cursorState,\r\n  addCursor,\r\n  deleteCursor,\r\n  updateCursor,\r\n  collection,\r\n  roomInfo,\r\n  updateStore,\r\n  presenceId,\r\n  linterState,\r\n}) => {\r\n  const quillRef = useRef(null);\r\n  const doc = useDocument({ collection, roomInfo, presenceId }, quillRef);\r\n  const cursors = useCursorsModule(quillRef, collection, cursorState);\r\n  useChangeNotifications(\r\n    cursorState,\r\n    { addCursor, deleteCursor, updateCursor },\r\n    doc,\r\n    quillRef,\r\n    cursors\r\n  );\r\n\r\n  const onChange = (content, delta, source, editor) => {\r\n    quillRef.current\r\n      .getEditor()\r\n      .formatLine(0, quillRef.current.getEditor().getLength(), {\r\n        \"code-block\": true,\r\n      });\r\n    if (source === \"user\") {\r\n      doc.submitChange(delta);\r\n    }\r\n    const renderState = editor.getText();\r\n    updateStore(renderState);\r\n  };\r\n  const onChangeSelection = (range, source, editor) => {\r\n    if (range && range.index >= 0) {\r\n      range.name = roomInfo.name;\r\n      doc.submitPresence(range);\r\n    } else if (!range && source === \"user\") {\r\n      doc.submitPresence(null);\r\n    }\r\n  };\r\n  const modules = {...TextArea.modules, linter: collection == 'js' ? true : false};\r\n  return (\r\n    <div className=\"textArea\">\r\n      <EditorBar editor_language={collection} />\r\n      <ReactQuill\r\n        ref={quillRef}\r\n        classname=\"quill\"\r\n        defaultValue={{\r\n          ops: [{ attributes: { \"code-block\": true }, insert: \"\\n\" }],\r\n        }}\r\n        theme=\"bubble\"\r\n        onChange={onChange}\r\n        onChangeSelection={onChangeSelection}\r\n        modules={modules}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nTextArea.modules = {\r\n  syntax: {\r\n    highlight: (text) => hljs.highlightAuto(text).value,\r\n  },\r\n  toolbar: false,\r\n  clipboard: {\r\n    matchVisual: false,\r\n  },\r\n  linter: true,\r\n  history: {\r\n    userOnly: true,\r\n  },\r\n  cursors: true,\r\n};\r\n\r\nfunction useDocument(documentInfo, ref) {\r\n  const doc = useMemo(\r\n    () =>\r\n      new Document(\r\n        \"collab-code.herokuapp.com\",\r\n        documentInfo.collection,\r\n        documentInfo.roomInfo.room,\r\n        documentInfo.presenceId,\r\n        documentInfo.roomInfo.name\r\n      ),\r\n    []\r\n  );\r\n  useEffect(() => {\r\n    doc.subscribe();\r\n  }, []);\r\n\r\n  return doc;\r\n}\r\n\r\nfunction manageCursors(cursorState, actions, collection, cursors, data) {\r\n  const cursor = {\r\n    id: data.id,\r\n    name: data.range ? data.range.name : null,\r\n    range: data.range,\r\n  };\r\n  const cursorsState = cursorState.filter(\r\n    (cursor) => cursor.collection === collection\r\n  );\r\n  // if this is a new cursor: addCursor\r\n  if (!cursorsState.find((curs) => curs.id === cursor.id)) {\r\n    const dispatchData = Object.assign({ collection }, { cursor });\r\n    actions.addCursor(dispatchData);\r\n    return;\r\n  } else {\r\n    // if range is null: deleteCursor\r\n    if (!cursor.range) {\r\n      cursors.removeCursor(cursor.id);\r\n    } else {\r\n      // if this cursor id exists in this collection: updateCursor\r\n      const dispatchData = Object.assign(\r\n        { collection },\r\n        { id: cursor.id },\r\n        { range: cursor.range }\r\n      );\r\n      actions.updateCursor(dispatchData);\r\n    }\r\n  }\r\n}\r\n\r\nfunction useChangeNotifications(cursorState, actions, doc, ref, cursors) {\r\n  useEffect(() => {\r\n    if (ref.current) {\r\n      function onChangeReceived(type, change) {\r\n        switch (type) {\r\n          case PRESENCE_CHANGE:\r\n            manageCursors(\r\n              cursorState,\r\n              actions,\r\n              doc.collection,\r\n              cursors,\r\n              change\r\n            );\r\n            break;\r\n          case DOCUMENT_CHANGE:\r\n            ref.current.getEditor().updateContents(change);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n      doc.attach(onChangeReceived);\r\n    }\r\n    return () => doc.detach();\r\n  }, [ref, cursors, doc, cursorState]);\r\n}\r\n\r\nfunction useCursorsModule(ref, collection, cursorState) {\r\n  let [cursors, setCursors] = useState(null);\r\n  // retrieve cursors module\r\n  useEffect(() => {\r\n    if (ref.current) {\r\n      setCursors(ref.current.getEditor().getModule(\"cursors\"));\r\n    }\r\n  }, [ref]);\r\n\r\n  // draw cursors from the redux state\r\n  useEffect(() => {\r\n    if (cursors && cursorState) {\r\n      const cursorsState = cursorState.filter(\r\n        (cursor) => cursor.collection === collection\r\n      );\r\n      cursors.clearCursors();\r\n      cursorsState.forEach((cursor) => {\r\n        cursors.createCursor(cursor.id, cursor.name, cursor.color);\r\n        cursors.moveCursor(cursor.id, cursor.range);\r\n      });\r\n    }\r\n  }, [cursorState]);\r\n  return cursors;\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addCursor: addCursor,\r\n  updateCursor: updateCursor,\r\n  deleteCursor: deleteCursor,\r\n};\r\nconst mapStateToProps = (state) => ({\r\n  cursorState: state.cursors.cursors,\r\n  linterState: state.linter.js,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TextArea);\r\n","import React from \"react\";\r\nimport TextArea from \"../TextArea\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { connect } from \"react-redux\";\r\nimport { updateRender, updateCss, updateJs } from \"../../../store/workSlice\";\r\n\r\nconst TextAreaGrid = ({ roomInfo, updateRender, updateCss, updateJs }) => {\r\n  const presenceId = uuidv4();\r\n  return (\r\n    <div className=\"textAreaGrid\">\r\n      <TextArea collection=\"html\" roomInfo={roomInfo} presenceId={presenceId} updateStore={updateRender}/>\r\n      <TextArea collection=\"css\" roomInfo={roomInfo} presenceId={presenceId} updateStore={updateCss}/>\r\n      <TextArea collection=\"js\" roomInfo={roomInfo} presenceId={presenceId} updateStore={updateJs}/>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps =  {\r\n  updateRender: updateRender,\r\n  updateCss: updateCss,\r\n  updateJs: updateJs\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(TextAreaGrid);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport tinycolor from \"tinycolor2\";\r\n\r\nconst ColorCircle = ({ color }) => {\r\n  return <span className=\"userColor\" style={{ background: `radial-gradient(circle, ${color} 50%, ${tinycolor(color).lighten(15)} 85%)` }}></span>;\r\n};\r\n\r\nconst UserDisplay = ({ color, name }) => {\r\n  return (\r\n    <li className=\"userLi\">\r\n      <ColorCircle color={color} />\r\n      <span className=\"userName\" style={{ backgroundColor: tinycolor(color).darken(50)}}>{name}</span>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default UserDisplay;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport UserDisplay from \"./UserDisplay\";\r\n\r\nconst UserListDisplay = ({ users }) => {\r\n  const userList = users\r\n    .filter(user => user.name)\r\n    .map(user => <UserDisplay color={user.color} name={user.name} />);\r\n  return <ul className=\"userList\">{userList}</ul>;\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  users: state.cursors.cursors\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(UserListDisplay);\r\n","import React from \"react\";\r\nimport { navigate } from \"@reach/router\";\r\nimport UserListDisplay from \"./UserListDisplay\";\r\n\r\nconst TopBar = () => {\r\n  return (\r\n    <div className=\"topBar\">\r\n      <UserListDisplay />\r\n      <button onClick={() => { navigate(\"/\", {}, { replace: true }); }}>\r\n        Join Session\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopBar;\r\n","import React from 'react';\r\nimport Display from './Display';\r\nimport TextAreaGrid from \"./TextAreaGrid\";\r\nimport TopBar from './TopBar';\r\n\r\nconst AppLayout = props => {\r\n  return (\r\n    <div className=\"appLayout\">\r\n      <TopBar />\r\n      <div className=\"appLayout row\">\r\n      <TextAreaGrid roomInfo={props.location.state} />\r\n      <Display />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppLayout;\r\n","import React, { useState } from \"react\";\r\nimport { navigate } from \"@reach/router\";\r\nimport \"./JoinRoomPage.scss\";\r\n\r\nconst JoinRoomPage = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [room, setRoom] = useState(\"\");\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    navigate(\"/app\", {state: { name: name, room: room }, replace: true});\r\n  }\r\n  return (\r\n    <div className=\"JoinRoomPage\">\r\n      <form  onSubmit={handleSubmit}>\r\n        <label htmlFor=\"name\">\r\n          Name:\r\n          </label>\r\n          <input type=\"text\" value={name} onChange={e => setName(e.target.value)} name=\"name\" />\r\n        <label htmlFor=\"room\">\r\n          Room:\r\n          </label>\r\n          <input type=\"text\" value={room} onChange={e => setRoom(e.target.value)} name=\"room\" />\r\n        <input type=\"submit\" value=\"Submit\" />\r\n      </form>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default JoinRoomPage;\r\n","import React from 'react';\r\nimport { Router } from \"@reach/router\";\r\nimport AppLayout from './components/AppLayout';\r\nimport JoinRoomPage from \"./components/JoinRoomPage\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <JoinRoomPage path=\"/\" />\r\n        <AppLayout path=\"/app\" />\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from \"react-redux\";\r\nimport App from './App';\r\nimport store from \"./store\";\r\nimport './scss/main.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n    <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","var richText = require('rich-text');\r\n\r\nrichText.type.transformPresence = function(presence, op, isOwnOp) {\r\n  if (!presence) {\r\n    return null;\r\n  }\r\n\r\n  var start = presence.index;\r\n  var end = presence.index + presence.length;\r\n  var delta = new richText.Delta(op);\r\n  start = delta.transformPosition(start, !isOwnOp);\r\n  end = delta.transformPosition(end, !isOwnOp);\r\n\r\n  return Object.assign({}, presence, {\r\n    index: start,\r\n    length: end - start\r\n  });\r\n};\r\n\r\nmodule.exports = richText;\r\n"],"sourceRoot":""}